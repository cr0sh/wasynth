use wasynth::parse::Module;

#[test]
fn types() {
    let module = parse_wat(autogenerated_from_files::FOR_CONTENTS);
}

fn parse_wat(wat_s: &str) -> Module {
    let wasm = wat::parse_str(wat_s).expect("cannot parse wat");

    // NOTE: wasm binary contents are leaked here
    parse_wasm(wasm.leak())
}

fn parse_wasm(wasm: &[u8]) -> Module {
    wasynth::parse::Module::from_binary(wasm).expect("cannot parse wasm")
}

mod autogenerated_from_files {
    use super::*;

    tests_gen::generate_tests!();
}
